2025-11-10 19:32:31 === INICIO ===
POST recibido:
{
    "TipoDispositivo": "Portatil",
    "MarcaDispositivo": "Dell",
    "IdFuncionario": "23",
    "IdVisitante": "",
    "accion": "registrar"
}
Conexión cargada
ERROR FINAL: Variable $conexion no inicializada
2025-11-10 19:33:45 === INICIO ===
POST recibido:
{
    "TipoDispositivo": "Portatil",
    "MarcaDispositivo": "Dell",
    "IdFuncionario": "23",
    "IdVisitante": "",
    "accion": "registrar"
}
Conexión cargada
Conexión verificada como PDO
Librería QR cargada
Modelo cargado
Acción: registrar
registrarDispositivo llamado
Respuesta final: {"success":false,"message":"Error al registrar en BD"}
2025-11-10 19:35:44 === INICIO ===
POST recibido:
{
    "TipoDispositivo": "Portatil",
    "MarcaDispositivo": "Dell",
    "IdFuncionario": "23",
    "IdVisitante": "",
    "accion": "registrar"
}
Conexión cargada
Conexión verificada como PDO
Librería QR cargada
Modelo cargado
Acción: registrar
registrarDispositivo llamado
Respuesta final: {"success":false,"message":"Error al registrar en BD"}
2025-11-10 19:39:16 === INICIO ===
POST recibido:
{
    "TipoDispositivo": "Portatil",
    "MarcaDispositivo": "Dell",
    "IdFuncionario": "23",
    "IdVisitante": "",
    "accion": "registrar"
}
Conexión cargada
Conexión verificada como PDO
Librería QR cargada
Modelo cargado
Acción: registrar
registrarDispositivo llamado
=== MODELO: registrarDispositivo ===
Tipo: Portatil, Marca: Dell, IdFunc: 23, IdVis: 
Conexión OK, preparando SQL
SQL preparado: INSERT INTO dispositivo 
                    (TipoDispositivo, MarcaDispositivo, IdFuncionario, IdVisitante, Estado)
                    VALUES (:tipo, :marca, :funcionario, :visitante, 'Activo')
Parámetros: {":tipo":"Portatil",":marca":"Dell",":funcionario":23,":visitante":null}
EXCEPCIÓN PDO: SQLSTATE[HY000]: General error: 1364 Field 'QrDispositivo' doesn't have a default value
Respuesta final: {"success":false,"message":"Error al registrar en BD"}
2025-11-10 19:45:08 === INICIO ===
POST recibido:
{
    "TipoDispositivo": "Portatil",
    "MarcaDispositivo": "Dell",
    "IdFuncionario": "23",
    "IdVisitante": "",
    "accion": "registrar"
}
Conexión cargada
Conexión verificada como PDO
Librería QR cargada
Modelo cargado
Acción: registrar
registrarDispositivo llamado
=== MODELO: registrarDispositivo ===
Tipo: Portatil, Marca: Dell, IdFunc: 23, IdVis: 
Conexión OK, preparando SQL
SQL preparado: INSERT INTO dispositivo 
                    (TipoDispositivo, MarcaDispositivo, IdFuncionario, IdVisitante, QrDispositivo, Estado)
                    VALUES (:tipo, :marca, :funcionario, :visitante, '', 'Activo')
Parámetros: {":tipo":"Portatil",":marca":"Dell",":funcionario":23,":visitante":null}
Resultado execute: true
INSERT exitoso, ID generado: 19
Generando QR para dispositivo ID: 19
QR generado exitosamente: C:\xampp\htdocs\SEGTRACK\segtrack\Controller\parqueadero_dispositivo/../../qr/QR-DISP-19-691232b4b526c.png
Respuesta final: {"success":true,"message":"Dispositivo registrado correctamente con ID: 19","data":{"IdDispositivo":"19","QrDispositivo":"qr\/QR-DISP-19-691232b4b526c.png"}}
